@import "tailwindcss";

/* ================== Design Tokens ================== */
:root {
  /* Colors */
  --color-bg: #0E1217;
  --color-surface: #161B22;
  --color-surface-alt: #1D222A;
  --color-header-border: #2B2F35;
  --color-input-bg: #1A1F26;
  --color-input-primary: #505B67;

  --color-text: #F4F6F8;
  --color-text-secondary: #D0D4D8;
  --color-text-muted: #9CA2A9;
  --color-info: #B2B8BF;
  --color-user: #9CBAD4;

  --color-accent: #0e589d;
  --color-accent-hover: #8FAAC2;
  --color-link: #AFC5D8;
  --color-link-hover: #D1E0F0;

  --color-modal-bg: #1B2028;
  --color-modal-border: #2E343C;
  --color-overlay-bg: rgba(17, 17, 17, 0.163);

  --color-muted-bg: #12161C;
  --color-border-soft: #2E3339;
  --color-border-strong: #3F444B;
  --color-focus-ring: rgba(167, 197, 225, 0.4);
  --color-hover-bg: rgba(118,146,172,.12);

  /* Buttons & Icons */
  --color-icon-default: #9CA2A9;
  --color-icon-hover: #F4F6F8;
  --color-icon-active: #0e589d;

  --color-btn-bg: #fffefe;
  --color-btn-text: #000;
  --color-btn-hover-bg: #fff;
  --color-btn-disabled: rgba(255, 255, 255, 0.4);

  /* Post card / menu */
  --color-card-bg: var(--color-surface);
  --color-card-border: var(--color-border-soft);
  --color-card-hover: var(--color-surface-alt);
  --color-menu-bg: var(--color-surface-alt);
  --color-menu-border: var(--color-border-soft);
  --color-menu-hover: rgba(255, 255, 255, 0.05);

  /* Reactions */
  --color-reaction-bg: #2A303C;
  --color-reaction-border: #3F444B;
  --color-like: #3b82f6;
  --color-dislike: #ef4444;

  /* Layout */
  --header-height: 3.75rem;   /* 60px */
  --padding-main: 1.25rem;    /* 20px */
  --input-radius: .5rem;
  --button-radius: .6rem;

  /* Z-index map */
  --z-header: 50;
  --z-dropdown: 60;
  --z-sidebar: 40;
  --z-overlay: 1100;

  /* Effects */
  --shadow-soft: 0 2px 8px rgba(0,0,0,.35);
  --transition-fast: .25s ease;
}

/* Sidebar width states (desktop) */
body { --sidebar-width: 15.625rem; }             /* 250px */
body.sidebar--collapsed { --sidebar-width: 5rem; } /* ~80px */

/* ================== Global App Shell ================== */
html, body, #root {
  background: var(--color-bg);
  color: var(--color-text);
}
html, body { overflow-x: hidden; }
.auth-shell {
  min-height: 100vh;
  background: var(--color-bg);
  color: var(--color-text);
  display: flex;
  align-items: stretch;   /* full chiều cao */
  justify-content: stretch;
  padding: 0;            /* quan trọng: bỏ padding để full-bleed */
}

/* ================== Header ================== */
header {
  position: fixed;
  inset: 0 auto auto 0;
  height: var(--header-height);
  display: grid; 
  grid-template-columns: repeat(3, 1fr);
  align-items: center;
  background: var(--color-bg);
  color: var(--color-text);
  border-bottom: 1px solid var(--color-header-border);
  z-index: var(--z-header);
}

/* ================== Sidebar ================== */
.desktop-sidebar {
  display: flex;
  flex-direction: column;
  position: fixed;
  top: var(--header-height);
  left: 0;
  width: var(--sidebar-width);
  height: calc(100% - var(--header-height));
  background: var(--color-bg);
  border-right: 1px solid var(--color-header-border);
  color: var(--color-text);
  overflow-y: auto;
  transition: width var(--transition-fast);
  z-index: var(--z-sidebar);
}

/* Buttons trong sidebar (tái sử dụng) */
.add-btn {
  background: var(--color-input-bg);
  color: var(--color-text);
  border: 1px solid var(--color-border-soft);
  border-radius: .5rem;
  padding: .5rem .75rem;
  transition: background var(--transition-fast), border-color var(--transition-fast);
}
.add-btn:hover {
  background: var(--color-surface-alt);
  border-color: var(--color-border-strong);
}

/* ================== Main ================== */
main {
  margin-top: var(--header-height);
  /* dùng công thức bạn đang có để không vỡ layout hiện tại */
  margin-left: calc(-8% + var(--sidebar-width));
  width: calc(118% - var(--sidebar-width));
  padding: var(--padding-main);
  min-height: calc(100vh - var(--header-height));
  background: var(--color-bg);
  color: var(--color-text);
  transition: margin-left var(--transition-fast), width var(--transition-fast);
  box-sizing: border-box;
}
body.sidebar--collapsed main {
  margin-left: calc(-8% + var(--sidebar-width));
  width: calc(118% - var(--sidebar-width));
}

/* ================== Search panel (optional) ================== */
.search-panel {
  position: absolute; 
  top: var(--header-height); 
  left: var(--sidebar-width); 
  right: 0;
  background: var(--color-bg); 
  border-bottom: 1px solid var(--color-header-border);
  z-index: var(--z-sidebar);
  padding: 1rem;
}

/* ================== Panels ================== */
.panel {
  background: var(--color-surface-alt);
  border: 1px solid var(--color-border-soft);
  border-radius: 0.75rem;
  padding: 1.5rem;
  color: var(--color-text);
  box-shadow: var(--shadow-soft);
}
.panel-muted {
  background: var(--color-muted-bg);
  color: var(--color-text-secondary);
}

/* ================== Banners ================== */
.banner {
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 1px solid transparent;
}
.banner--success {
  background: rgba(16, 185, 129, 0.15);
  color: #A7F3D0;
  border-color: rgba(5, 150, 105, 0.4);
}
.banner--error {
  background: rgba(239, 68, 68, 0.15);
  color: #FCA5A5;
  border-color: rgba(220, 38, 38, 0.4);
}
.banner--info {
  background: rgba(255,255,255,0.05);
  color: var(--color-text-secondary);
  border-color: var(--color-border-soft);
}

/* ================== Buttons ================== */
.btn {
  padding: 0.375rem 0.75rem;
  border-radius: var(--button-radius);
  font-size: 0.875rem;
  transition: background var(--transition-fast), color var(--transition-fast);
  cursor: pointer;
}
.btn-primary {
  background: var(--color-btn-bg);
  color: var(--color-btn-text);
}
.btn-primary:hover { background: var(--color-btn-hover-bg); }
.btn-outline {
  border: 1px solid var(--color-border-soft);
  background: transparent;
  color: var(--color-text);
}
.btn-outline:hover { background: var(--color-hover-bg); }

/* ================== Pagination ================== */
.pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}
.pagination button {
  background: transparent;
  border: 1px solid var(--color-border-soft);
  color: var(--color-text);
  border-radius: 0.4rem;
  padding: 0.35rem 0.8rem;
}
.pagination button:hover { background: var(--color-hover-bg); }
.pagination button:disabled { opacity: 0.4; cursor: not-allowed; }

/* ================== Auth Layout (Login/Register) ================== */
/* Khi đang ở AuthLayout, body sẽ có class 'auth-page' (do AuthLayout.jsx gắn) */
body.auth-page #root {
  /* reset mọi rule #root cũ từng áp toàn app */
  max-width: none;
  padding: 0;
  text-align: initial;
}

.auth-shell {
  min-height: 100vh;
  background: var(--color-bg);
  color: var(--color-text);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem; /* mobile spacing */
}

.auth-main {
  width: 100%;
  max-width: none;       /* bỏ 960px */
  height: 100vh;         /* full chiều cao */
  display: block;
}
.signup-container {
  height: 100%;          /* kế thừa 100vh từ .auth-main */
  width: 100%;
  margin: 0;
  display: grid;
  grid-template-columns: 1fr 1fr;   /* trái/phải 50/50 */
}
/* Container form gọn */
.auth-container {
  max-width: 420px;
  width: 100%;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  text-align: center;
}

.left-panel,
.right-panel {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ================== Mobile (≤ 640px) ================== */
@media (max-width: 40rem) {
  header {
    grid-template-columns: auto 1fr auto !important;
    height: 3.25rem;
  }
  main {
    margin-left: 0;
    width: 100%;
  }
  .search-panel { left: 0; right: 0; }

  /* Auth */
  .left-panel { display: none; }
  .right-panel { width: 100%; padding: 1rem; }
  .auth-container { max-width: 480px; padding: 1.25rem 1rem; }
}

